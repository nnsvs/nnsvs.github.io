<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>How to choose model &mdash; nnsvs 0.1.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/plot_directive.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js?v=5d32c60e"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script src="_static/documentation_options.js?v=01f34227"></script>
        <script src="_static/doctools.js?v=888ff710"></script>
        <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Defining your custom model" href="custom_models.html" />
    <link rel="prev" title="Getting started with recipes" href="recipes.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            nnsvs
          </a>
              <div class="version">
                0.1.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Demos</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="notebooks/Demos.html">NNSVS demos</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Guides</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="installation.html">Installation guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="recipes.html">Getting started with recipes</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">How to choose model</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#time-lag-model">Time-lag model</a></li>
<li class="toctree-l2"><a class="reference internal" href="#duration-model">Duration model</a></li>
<li class="toctree-l2"><a class="reference internal" href="#acoustic-model">Acoustic model</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#multi-stream-models">Multi-stream models</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#vocoder">Vocoder</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="custom_models.html">Defining your custom model</a></li>
<li class="toctree-l1"><a class="reference internal" href="devdocs.html">Development guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="tips.html">Tips</a></li>
<li class="toctree-l1"><a class="reference internal" href="update_guide.html">Update guide</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Advanced guides</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="optuna.html">Hyperparameter optimization with Optuna</a></li>
<li class="toctree-l1"><a class="reference internal" href="train_vocoders.html">How to train neural vocoders with ParallelWaveGAN</a></li>
<li class="toctree-l1"><a class="reference internal" href="train_usfgan.html">How to train uSFGAN/SiFiGAN vocoders</a></li>
<li class="toctree-l1"><a class="reference internal" href="enunu2nnsvs.html">How to convert ENUNU models to NNSVS’ ones</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Notes</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview of NNSVS’s SVS</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Package reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="modules/base.html">nnsvs.base</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/model.html">nnsvs.model</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/acoustic_models.html">nnsvs.acoustic_models</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/postfilters.html">nnsvs.postfilters</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/discriminators.html">nnsvs.discriminators</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/pretrained.html">nnsvs.pretrained</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/svs.html">nnsvs.svs</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/dsp.html">nnsvs.dsp</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/gen.html">nnsvs.gen</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/io.html">nnsvs.io</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/mdn.html">nnsvs.mdn</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/pitch.html">nnsvs.pitch</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/multistream.html">nnsvs.multistream</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/util.html">nnsvs.util</a></li>
<li class="toctree-l1"><a class="reference internal" href="modules/train_util.html">nnsvs.train_util</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Resources</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="links.html">Useful links</a></li>
<li class="toctree-l1"><a class="reference internal" href="papers.html">Papers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Meta information</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="changelog.html">Change log</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">nnsvs</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">How to choose model</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/how_to_choose_model.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="how-to-choose-model">
<h1>How to choose model<a class="headerlink" href="#how-to-choose-model" title="Link to this heading"></a></h1>
<p>There are number of models available in NNSVS. This page describes how to choose a model if you are unsure what to use.</p>
<p>Best models for Namine Ritsu’s database are listed for your reference.</p>
<section id="time-lag-model">
<h2>Time-lag model<a class="headerlink" href="#time-lag-model" title="Link to this heading"></a></h2>
<p>Use <a class="reference internal" href="modules/model.html#nnsvs.model.MDNv2" title="nnsvs.model.MDNv2"><code class="xref py py-class docutils literal notranslate"><span class="pre">nnsvs.model.MDNv2</span></code></a> or <a class="reference internal" href="modules/model.html#nnsvs.model.VariancePredictor" title="nnsvs.model.VariancePredictor"><code class="xref py py-class docutils literal notranslate"><span class="pre">nnsvs.model.VariancePredictor</span></code></a> (with <code class="docutils literal notranslate"><span class="pre">use_mdn=True</span></code>). The latter works better at least for the Namine Ritsu’s database.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The best model for Namine Ritsu’s database: <a class="reference internal" href="modules/model.html#nnsvs.model.VariancePredictor" title="nnsvs.model.VariancePredictor"><code class="xref py py-class docutils literal notranslate"><span class="pre">nnsvs.model.VariancePredictor</span></code></a></p>
</div>
</section>
<section id="duration-model">
<h2>Duration model<a class="headerlink" href="#duration-model" title="Link to this heading"></a></h2>
<p>Use <a class="reference internal" href="modules/model.html#nnsvs.model.MDNv2" title="nnsvs.model.MDNv2"><code class="xref py py-class docutils literal notranslate"><span class="pre">nnsvs.model.MDNv2</span></code></a> or <a class="reference internal" href="modules/model.html#nnsvs.model.VariancePredictor" title="nnsvs.model.VariancePredictor"><code class="xref py py-class docutils literal notranslate"><span class="pre">nnsvs.model.VariancePredictor</span></code></a> (with <code class="docutils literal notranslate"><span class="pre">use_mdn=True</span></code>). The latter works better at least for the Namine Ritsu’s database.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The best model for Namine Ritsu’s database: <a class="reference internal" href="modules/model.html#nnsvs.model.VariancePredictor" title="nnsvs.model.VariancePredictor"><code class="xref py py-class docutils literal notranslate"><span class="pre">nnsvs.model.VariancePredictor</span></code></a></p>
</div>
</section>
<section id="acoustic-model">
<h2>Acoustic model<a class="headerlink" href="#acoustic-model" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p>Use static features only. We found that dynamic features are less beneficial (at least for Namine Ritsu’s database).</p></li>
<li><p>Use <a class="reference internal" href="modules/model.html#nnsvs.model.Conv1dResnet" title="nnsvs.model.Conv1dResnet"><code class="xref py py-class docutils literal notranslate"><span class="pre">nnsvs.model.Conv1dResnet</span></code></a> (<code class="docutils literal notranslate"><span class="pre">use_mdn=True</span></code>) if you like old-style MDN-based acoustic model that was used in <a class="reference external" href="https://www.youtube.com/watch?v=pKeo9IE_L1I">Namine Ritsu’s V2 model</a>.</p></li>
<li><p>If you have a large amount of data, use multi-stream models (e.g., <a class="reference internal" href="modules/acoustic_models.html#nnsvs.acoustic_models.NPSSMultistreamParametricModel" title="nnsvs.acoustic_models.NPSSMultistreamParametricModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">nnsvs.acoustic_models.NPSSMultistreamParametricModel</span></code></a>) where each feature stream is modeled by an autoregressive decoder except V/UV feature stream. Specifically, use autoregressive models for MGCs, log-F0, and BAP features. Please refer to the Namine Ritsu’s recipes to find example model configurations. Note that autoregresive models tend to require a larger amount of training data. Consider try fine-tuning if you have less amount of data.</p></li>
</ul>
<section id="multi-stream-models">
<h3>Multi-stream models<a class="headerlink" href="#multi-stream-models" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>For F0 feature stream: use <a class="reference internal" href="modules/acoustic_models.html#nnsvs.acoustic_models.BiLSTMNonAttentiveDecoder" title="nnsvs.acoustic_models.BiLSTMNonAttentiveDecoder"><code class="xref py py-class docutils literal notranslate"><span class="pre">nnsvs.acoustic_models.BiLSTMNonAttentiveDecoder</span></code></a>. We found that autoregressive F0 models worked better than non-autoregressive alternatives. There are a number of model parameters, but please be aware that <code class="docutils literal notranslate"><span class="pre">reduction_factor</span></code> has great impact on the modeling capability. Smaller values allow the model to capture finer grained temporal information with training instability, wheareas larger values allow the model to capture coarser grained temporal information. We recommend to use <code class="docutils literal notranslate"><span class="pre">reduction_factor=4</span></code> for F0 feature stream. You may also try <code class="docutils literal notranslate"><span class="pre">reduction_factor=2</span></code>.</p></li>
<li><p>For MGC/BAP feature streams: Use non-MDN autoregressive models (e.g., <a class="reference internal" href="modules/acoustic_models.html#nnsvs.acoustic_models.BiLSTMNonAttentiveDecoder" title="nnsvs.acoustic_models.BiLSTMNonAttentiveDecoder"><code class="xref py py-class docutils literal notranslate"><span class="pre">nnsvs.acoustic_models.BiLSTMNonAttentiveDecoder</span></code></a>) over MDN-based autoregressive models (e.g., <a class="reference internal" href="modules/acoustic_models.html#nnsvs.acoustic_models.BiLSTMMDNNonAttentiveDecoder" title="nnsvs.acoustic_models.BiLSTMMDNNonAttentiveDecoder"><code class="xref py py-class docutils literal notranslate"><span class="pre">nnsvs.acoustic_models.BiLSTMMDNNonAttentiveDecoder</span></code></a>). As reported in Tacotorn 2 paper (<span id="id1">Shen <em>et al.</em> [<a class="reference internal" href="papers.html#id67" title="Jonathan Shen, Ruoming Pang, Ron J Weiss, Mike Schuster, Navdeep Jaitly, Zongheng Yang, Zhifeng Chen, Yu Zhang, Yuxuan Wang, Rj Skerrv-Ryan, and others. Natural TTS synthesis by conditioning WaveNet on mel spectrogram predictions. In Proc. ICASSP, 4779–4783. 2018.">SPW+18</a>]</span>), we empirically found that non-MDN version worked better than the MDN-version.</p></li>
</ul>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The best model for Namine Ritsu’s database: <a class="reference internal" href="modules/acoustic_models.html#nnsvs.acoustic_models.NPSSMultistreamParametricModel" title="nnsvs.acoustic_models.NPSSMultistreamParametricModel"><code class="xref py py-class docutils literal notranslate"><span class="pre">nnsvs.acoustic_models.NPSSMultistreamParametricModel</span></code></a></p>
</div>
</section>
</section>
<section id="vocoder">
<h2>Vocoder<a class="headerlink" href="#vocoder" title="Link to this heading"></a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The best model for Namine Ritsu’s database: uSFGAN</p>
</div>
<ul class="simple">
<li><p>Use WORLD first. WORLD can achieve reasonably good-quality synthesis with pitch robustness. It also generalizes well on unseen speakers (singers) with no training.</p></li>
<li><p>If you want to maximize the quality, use <a class="reference external" href="https://github.com/chomeyama/HN-UnifiedSourceFilterGAN">uSFGAN</a>.</p></li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="recipes.html" class="btn btn-neutral float-left" title="Getting started with recipes" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="custom_models.html" class="btn btn-neutral float-right" title="Defining your custom model" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2020, Ryuichi Yamamoto.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>